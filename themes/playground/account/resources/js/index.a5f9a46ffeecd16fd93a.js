!function(e){function t(t){for(var r,s,c=t[0],i=t[1],l=t[2],d=0,p=[];d<c.length;d++)s=c[d],o[s]&&p.push(o[s][0]),o[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={0:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="${url.resourcesPath}/js/";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;a.push([255,1]),n()}({255:function(e,t,n){n(256),n(421),e.exports=n(460)},422:function(e,t,n){window.resourceBaseUrl&&(n.p=window.resourceBaseUrl)},427:function(e,t,n){var r={"./af":123,"./af.js":123,"./ar":124,"./ar-dz":125,"./ar-dz.js":125,"./ar-kw":126,"./ar-kw.js":126,"./ar-ly":127,"./ar-ly.js":127,"./ar-ma":128,"./ar-ma.js":128,"./ar-sa":129,"./ar-sa.js":129,"./ar-tn":130,"./ar-tn.js":130,"./ar.js":124,"./az":131,"./az.js":131,"./be":132,"./be.js":132,"./bg":133,"./bg.js":133,"./bm":134,"./bm.js":134,"./bn":135,"./bn.js":135,"./bo":136,"./bo.js":136,"./br":137,"./br.js":137,"./bs":138,"./bs.js":138,"./ca":139,"./ca.js":139,"./cs":140,"./cs.js":140,"./cv":141,"./cv.js":141,"./cy":142,"./cy.js":142,"./da":143,"./da.js":143,"./de":144,"./de-at":145,"./de-at.js":145,"./de-ch":146,"./de-ch.js":146,"./de.js":144,"./dv":147,"./dv.js":147,"./el":148,"./el.js":148,"./en-SG":149,"./en-SG.js":149,"./en-au":150,"./en-au.js":150,"./en-ca":151,"./en-ca.js":151,"./en-gb":152,"./en-gb.js":152,"./en-ie":153,"./en-ie.js":153,"./en-il":154,"./en-il.js":154,"./en-nz":155,"./en-nz.js":155,"./eo":156,"./eo.js":156,"./es":157,"./es-do":158,"./es-do.js":158,"./es-us":159,"./es-us.js":159,"./es.js":157,"./et":160,"./et.js":160,"./eu":161,"./eu.js":161,"./fa":162,"./fa.js":162,"./fi":163,"./fi.js":163,"./fo":164,"./fo.js":164,"./fr":165,"./fr-ca":166,"./fr-ca.js":166,"./fr-ch":167,"./fr-ch.js":167,"./fr.js":165,"./fy":168,"./fy.js":168,"./ga":169,"./ga.js":169,"./gd":170,"./gd.js":170,"./gl":171,"./gl.js":171,"./gom-latn":172,"./gom-latn.js":172,"./gu":173,"./gu.js":173,"./he":174,"./he.js":174,"./hi":175,"./hi.js":175,"./hr":176,"./hr.js":176,"./hu":177,"./hu.js":177,"./hy-am":178,"./hy-am.js":178,"./id":179,"./id.js":179,"./is":180,"./is.js":180,"./it":181,"./it-ch":182,"./it-ch.js":182,"./it.js":181,"./ja":183,"./ja.js":183,"./jv":184,"./jv.js":184,"./ka":185,"./ka.js":185,"./kk":186,"./kk.js":186,"./km":187,"./km.js":187,"./kn":188,"./kn.js":188,"./ko":189,"./ko.js":189,"./ku":190,"./ku.js":190,"./ky":191,"./ky.js":191,"./lb":192,"./lb.js":192,"./lo":193,"./lo.js":193,"./lt":194,"./lt.js":194,"./lv":195,"./lv.js":195,"./me":196,"./me.js":196,"./mi":197,"./mi.js":197,"./mk":198,"./mk.js":198,"./ml":199,"./ml.js":199,"./mn":200,"./mn.js":200,"./mr":201,"./mr.js":201,"./ms":202,"./ms-my":203,"./ms-my.js":203,"./ms.js":202,"./mt":204,"./mt.js":204,"./my":205,"./my.js":205,"./nb":206,"./nb.js":206,"./ne":207,"./ne.js":207,"./nl":208,"./nl-be":209,"./nl-be.js":209,"./nl.js":208,"./nn":210,"./nn.js":210,"./pa-in":211,"./pa-in.js":211,"./pl":212,"./pl.js":212,"./pt":213,"./pt-br":214,"./pt-br.js":214,"./pt.js":213,"./ro":215,"./ro.js":215,"./ru":216,"./ru.js":216,"./sd":217,"./sd.js":217,"./se":218,"./se.js":218,"./si":219,"./si.js":219,"./sk":220,"./sk.js":220,"./sl":221,"./sl.js":221,"./sq":222,"./sq.js":222,"./sr":223,"./sr-cyrl":224,"./sr-cyrl.js":224,"./sr.js":223,"./ss":225,"./ss.js":225,"./sv":226,"./sv.js":226,"./sw":227,"./sw.js":227,"./ta":228,"./ta.js":228,"./te":229,"./te.js":229,"./tet":230,"./tet.js":230,"./tg":231,"./tg.js":231,"./th":232,"./th.js":232,"./tl-ph":233,"./tl-ph.js":233,"./tlh":234,"./tlh.js":234,"./tr":235,"./tr.js":235,"./tzl":236,"./tzl.js":236,"./tzm":237,"./tzm-latn":238,"./tzm-latn.js":238,"./tzm.js":237,"./ug-cn":239,"./ug-cn.js":239,"./uk":240,"./uk.js":240,"./ur":241,"./ur.js":241,"./uz":242,"./uz-latn":243,"./uz-latn.js":243,"./uz.js":242,"./vi":244,"./vi.js":244,"./x-pseudo":245,"./x-pseudo.js":245,"./yo":246,"./yo.js":246,"./zh-cn":247,"./zh-cn.js":247,"./zh-hk":248,"./zh-hk.js":248,"./zh-tw":249,"./zh-tw.js":249};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=427},459:function(e,t){},460:function(e,t,n){"use strict";n.r(t);var r,o=n(2),a=n(89),s=function(e,t,n,r){return void 0===n&&(n=void 0),void 0===r&&(r=void 0),new Promise(function(o,a){var s=window.keycloakUrl?window.keycloakUrl:"https://auth.hanko.io/auth/",c=window.realmId?window.realmId:"master";e.updateToken(30).success(function(a){var i=s+"realms/"+c+t,l=r?{authorization:"Bearer "+e.token,"Content-Type":"application/json"}:{authorization:"Bearer "+e.token},u={method:n||"GET",headers:l,body:r?JSON.stringify(r):null};fetch(i,u).then(function(e){return e.json()}).then(function(e){return o(e)}).catch(function(e){return o(void 0)})})})},c=n(0),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.deregister=function(){var e=n.props,t=e.device,r=e.keycloak,o=e.deviceDeletedHandler;return s(r,"/hanko/devices/"+t.typeId+"/"+t.deviceId,"DELETE").then(function(e){o()}),!1},n}return i(t,e),t.prototype.render=function(){var e=this.props.device;return o.createElement("tr",null,o.createElement("td",null,e.name),o.createElement("td",null,e.type),o.createElement("td",null,c(e.createdAt).fromNow()),o.createElement("td",null,c(e.lastUsage).fromNow()),o.createElement("td",null,o.createElement("a",{href:"#",onClick:this.deregister},"delete")))},t}(o.Component),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={devices:void 0},n}return u(t,e),t.prototype.render=function(){var e=this.props,t=e.devices,n=e.keycloak,r=e.deviceDeletedHandler;return 0===t.length?o.createElement("div",null,"no devices registered"):o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Name"),o.createElement("th",null,"Type"),o.createElement("th",null,"Created At"),o.createElement("th",null,"Last Activity"),o.createElement("th",null,"Manage"))),o.createElement("tbody",null,t.map(function(e,t){return o.createElement(l,{device:e,key:t,keycloak:n,deviceDeletedHandler:r})})))},t}(o.Component),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e){function t(t){var n=e.call(this,t)||this;return n.requestQrCode=function(){var e=n.props.keycloak;s(e,"/hanko/register","POST").then(function(e){n.setState({qrCode:e.qrCode}),n.updateState()})},n.cancel=function(){(0,n.props.cancelHandler)()},n.updateState=function(){var e=n.props.keycloak;s(e,"/hanko/register/complete","POST").then(function(e){switch(e.status){case"PENDING":n.timerId=window.setTimeout(n.updateState,1e3);break;case"OK":n.setState({qrCode:void 0}),(0,n.props.completionHandler)();break;default:n.setState({qrCode:void 0}),n.cancel()}})},n.state={qrCode:void 0},n}return p(t,e),t.prototype.componentDidMount=function(){this.requestQrCode()},t.prototype.componentWillUnmount=function(){clearTimeout(this.timerId)},t.prototype.render=function(){var e=this.state.qrCode;return o.createElement("div",{className:"flex column align-start"},o.createElement("h1",null,"Register new Hanko Authenticator"),e?o.createElement("div",{className:"margin-bottom"},o.createElement("img",{src:e+"?fg=0&bg=ffffff",className:"fadein"})):null,o.createElement("div",{className:"pull-right"},o.createElement("button",{onClick:this.cancel},"Cancel")))},t}(o.Component),h=function(e){return{name:e.keyName,type:"FIDO_UAF"==e.authenticatorType?"Hanko Authenticator":e.authenticatorType,createdAt:e.createdAt,lastUsage:e.lastUsage,deviceId:e.deviceId,typeId:e.authenticatorType}},m=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(e){function t(t){var n=e.call(this,t)||this;return n.passwordChanged=function(e){n.setState({password:e.target.value})},n.passwordValidationChanged=function(e){n.setState({passwordValidation:e.target.value})},n.changePassword=function(){var e=n.props.keycloak,t=n.state,r=t.password,o=t.passwordValidation;if(r&&r.length>0){if(!(o&&o.length>0&&r===o))return void alert("passwords do not match");s(e,"/hanko/password","POST",{newPassword:r}).then(function(e){n.setState({password:"",passwordValidation:""}),alert("Password successfully changed")}).catch(function(e){console.error(e),alert("Oops, your password could not be updated.")})}else alert("password must not be empty")},n.state={password:"",passwordValidation:""},n}return m(t,e),t.prototype.render=function(){var e=this.state,t=e.password,n=e.passwordValidation;return o.createElement("div",{className:"container"},o.createElement("h1",null,"Change Password"),o.createElement("div",{className:"formfield"},o.createElement("label",null,"Password"),o.createElement("input",{type:"password",value:t,onChange:this.passwordChanged})),o.createElement("div",{className:"formfield"},o.createElement("label",null,"Password (repeat)"),o.createElement("input",{type:"password",value:n,onChange:this.passwordValidationChanged})),o.createElement("div",{className:"pull-right"},o.createElement("button",{onClick:this.changePassword},"Change")))},t}(o.Component),y=n(253),v=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r},k=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return window.btoa(t).replace(/\//g,"_").replace(/\+/g,"-")},w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(t){var n=e.call(this,t)||this;return n.addThisDevice=function(){var e=n.props,t=e.keycloak,r=e.refetch,o="roaming"==e.type?{requireResidentKey:!1,userVerification:"preferred",authenticatorAttachment:"cross-platform"}:{requireResidentKey:!0,userVerification:"required",authenticatorAttachment:"platform"};s(t,"/hanko/registerType/WEBAUTHN","POST").then(function(e){var n=JSON.parse(e.request),a=v(n.challenge),c={pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],rp:{name:n.rpName},user:{id:a,name:n.displayName,displayName:n.displayName},authenticatorSelection:o,timeout:5e4,challenge:a,excludeCredentials:[],attestation:"none"};navigator.credentials.create({publicKey:c}).then(function(e){var o=k(e.response.attestationObject),a=k(e.response.clientDataJSON),c={credID:e.id.replace(/\//g,"_").replace(/\+/g,"-"),publicKey:o,challenge:n.challenge,clientData:a};s(t,"/hanko/request/verify/webauthn","POST",c).then(function(e){r()})}).catch(function(e){console.error(e)})})},n.state={},n}return w(t,e),t.prototype.render=function(){var e=this.props.children;return o.createElement("button",{onClick:this.addThisDevice},e)},t}(o.Component),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=y.a.div({display:"flex",flexDirection:"column",alignItems:"center",flex:1}),_=function(e){function t(t){var n=e.call(this,t)||this;return n.showAddHankoAuthenticator=function(){n.setState({showAddHankoAuthenticator:!0})},n.hideAddHankoAuthenticator=function(){n.setState({showAddHankoAuthenticator:!1})},n.completionHandler=function(){n.hideAddHankoAuthenticator(),n.setState({devices:void 0}),n.fetchDevices()},n.fetchDevices=function(){var e=n.props.keycloak;s(e,"/hanko/devices").then(function(e){var t=e.map(function(e){return h(e)});n.setState({devices:t})})},n.b64DecodeUnicode=function(e){return decodeURIComponent(Array.prototype.map.call(atob(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))},n.parseJwt=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(n.b64DecodeUnicode(t))},n.state={showAddHankoAuthenticator:!1,showAddPlatformAuthenticator:!1,devices:void 0},n}return b(t,e),t.prototype.componentDidMount=function(){var e=this;this.fetchDevices(),window.PublicKeyCredential&&window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(function(t){e.setState({showAddPlatformAuthenticator:t})})},t.prototype.render=function(){var e=this.props.keycloak,t=e.token,r=t?this.parseJwt(t):{},a=r.name?r.name:"",s=r.email?r.email:"",c=this.state,i=c.showAddHankoAuthenticator,l=c.showAddPlatformAuthenticator,u=c.devices,p=new URLSearchParams(window.location.search),h=p.get("redirectUrl"),m=p.get("redirectName"),y=m||"return",v=n.p+"../img/logo.png";return o.createElement(E,null,o.createElement("div",{className:"navigation-bar"},o.createElement("div",{className:"flex row"},o.createElement("a",{className:"navigation-bar-header-link",href:h||""},o.createElement("img",{className:"navbar-logo",src:v})),o.createElement("span",{className:"navbar-header"},"Manage Account")),h?o.createElement("a",{className:"navigation-bar-link",href:h},"◄ ",y):null),o.createElement("div",{id:"content"},o.createElement("div",{className:"center column"},o.createElement("div",{className:"container"},o.createElement("h1",null,"My Account"),o.createElement("div",{className:"formfield"},o.createElement("label",null,"Name"),o.createElement("span",null,a)),o.createElement("div",{className:"formfield"},o.createElement("label",null,"E-Mail"),o.createElement("span",null,s))),o.createElement("div",{className:"container"},o.createElement("h1",null,"Registered Devices"),void 0===u?o.createElement("div",null,"Loading..."):o.createElement(d,{keycloak:e,devices:u,deviceDeletedHandler:this.fetchDevices}),o.createElement("div",{className:"margin-bottom"}),i?o.createElement(f,{keycloak:e,cancelHandler:this.hideAddHankoAuthenticator,completionHandler:this.completionHandler}):o.createElement("div",{className:"button-list pull-right"},o.createElement("button",{onClick:this.showAddHankoAuthenticator},"Add Hanko Authenticator"),o.createElement(g,{refetch:this.fetchDevices,keycloak:e,type:"roaming"},"Add Security Key"),l?o.createElement(g,{refetch:this.fetchDevices,keycloak:e,type:"platform"},"Add Windows Hello"):null)),o.createElement(j,{keycloak:e}))))},t}(o.Component),A=n(254),O=function(e){var t=e.keycloak;return o.createElement("div",null,o.createElement("h1",null,"Login failed"),o.createElement("button",{onClick:function(){t.login()}},"Try again"))};n(422);var C=A({url:void 0!==window.keycloakUrl?window.keycloakUrl:"https://auth.hanko.io/auth",realm:void 0!==window.realmId?window.realmId:"master",clientId:"hanko-account"});C.init({onLoad:"login-required"}).success(function(e){a.render(o.createElement(_,{keycloak:C}),document.getElementById("root"))}).error(function(){a.render(o.createElement(O,{keycloak:C}),document.getElementById("root"))})}});